<section data-ng-controller="UserManagementController" data-ng-init="findOne();">
    <div class="page-header">
        <h1 data-ng-bind="selectedUser.displayName"></h1>
    </div>
    <div class="white-card">
        <label>登陆用户名:</label>
        <span>{{selectedUser.username}}</span>
    <br>
    <div class="row">
        <div class=" col-md-3">
            <p></p>
            <label>商户名:   </label>
            <span>{{selectedUser.displayName}}</span>
        </div>
        <div class=" col-md-1">
            <a data-toggle="modal" data-target="#changeDisplayName">
                <input class=" btn btn-success" type="submit" value="更改名称">
            </a>
        </div>
        <div class=" col-md-4">
            <div data-ng-show="cityChangeFlag" class="text-left text-warning">
                <p></p>
                <strong data-ng-bind="cityChangeFlag"></strong>
            </div>
        </div>
        <div class="modal fade" id="changeDisplayName" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">修改商户名称</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-3">
                                <label>原商户名:   </label>
                                <span>{{selectedUser.displayName}}</span>
                            </div>
                        </div>
                        <br>
                        <div >
                            <label>新商户名:   </label>
                        </div>
                        <div >
                            <input type="text" data-ng-model="newDisplayName" id="newDisplayName" class="form-control" placeholder="新名称"
                                   required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal"
                                ng-click="saveNewDisplayName(newDisplayName)">
                            ok
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div><br>
    <label class="control-label">包含任务:（{{tasks.length}}）</label>
    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>任务名称</th>
        </tr>
        </thead>
        <tr ng-repeat="task in tasks">
            <td>{{task.name}}</td>
        </tr>
    </table>

    <div class="form-group">
        <button class="btn  btn-danger" data-target="#deleteTenant" data-toggle="modal">
            <i class="glyphicon glyphicon-remove"></i>
            <span>删除该商户</span>
        </button>
        <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1"class="modal fade" bs-popup="" ng-model="test"
             id="deleteTenant" style="display: none;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header alert-info">
                        <h4 id="myModalLabel" class="modal-title">提示</h4>
                    </div>
                    <div class="modal-body">
                        <p>商户为重要信息，删除之后无法恢复，确定要删除吗？</p>
                    </div>
                    <div class="modal-footer">
                        <button aria-hidden="true" data-dismiss="modal" class="btn btn-cancel pull-right"
                                type="button">取消
                        </button>
                        <button class="btn btn-danger pull-left" ng-click="deleteTenant()" data-dismiss="modal">删除
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <div data-ng-show="error" class="text-danger">
        <strong data-ng-bind="error"></strong>
    </div>
</section>
